#!/usr/bin/env zsh
set -euo pipefail

if (( $# != 2 )); then
  print -u2 "Usage: ${0:t} <file> <url>"
  exit 1
fi

file=$1
url=$2

if [[ ! -e $file ]]; then
  print -u2 "Error: file not found: $file"
  exit 1
fi

attr_name="user.url"

# Write URL into extended attribute
xattr -w "$attr_name" "$url" -- "$file"

print "Set $attr_name on $file -> $url"
