# ~/.config/starship.toml
add_newline = true
command_timeout = 500
scan_timeout = 10

format = "$os$hostname$directory$git_branch    ${custom.disk_free}   ${custom.uptime}   $battery $line_break$character"

# ---------- OS + Host ----------
[os]
disabled = false
format = "[$symbol]($style)"
style = "bold white"
[os.symbols]
Macos = " "

[hostname]
ssh_only = false
format = "[$hostname]($style) "
style="bold white"
disabled = false

# ---------- Directory (absolute path) ----------
[directory]
style = "bold blue"
format = "[$path]($style) "
truncation_length = 0
truncate_to_repo = false

# ---------- Git ----------
[git_branch]
symbol = " "
style = "bold green"
format = "[$symbol$branch]($style) "

[git_status]
style = "bold red"
format = "[$all_status$ahead_behind]($style) "
disabled = false

# ---------- Disk Free (GB of current filesystem) ----------
[custom.disk_free]
command = "df -k . | tail -1 | awk '{print $4*1024}' | /opt/homebrew/opt/coreutils/libexec/gnubin/numfmt --to=iec --suffix=B --format=\"%.1f\" | tr '[:upper:]' '[:lower:]'"
when = "true"
format = "[  $output free](bold yellow) "

# ---------- Uptime (warn ≥ 2 days) ----------
# Red when >= 2 days
[custom.uptime_warn]
when = 'boot=$(sysctl -n kern.boottime | awk "{print \$4}" | tr -d ","); now=$(date +%s); (( now - boot >= 172800 ))'
command = 'uptime | awk -F"up " "{print \$2}" | sed "s/, .*//"'
shell = ["bash", "-lc"]
format = "[ $output](bold red) "

# Yellow when < 2 days
[custom.uptime_ok]
when = 'boot=$(sysctl -n kern.boottime | awk "{print \$4}" | tr -d ","); now=$(date +%s); (( now - boot < 172800 ))'
command = 'uptime | awk -F"up " "{print \$2}" | sed "s/, .*//"'
shell = ["bash", "-lc"]
format = "[ $output](bold yellow) "

[custom.uptime]
command = 'uptime | awk -F"up " "{print \$2}" | sed "s/, .*//"'
when = "true"
format = "[󰍹  up $output](bold blue) "

# ---------- Battery ----------
[battery]
format = "[$symbol $percentage]($style) "
display = [
  { threshold = 101, style = "bold green" } # apply style at any charge
]
full_symbol = " "
charging_symbol = " "
discharging_symbol = " "
unknown_symbol = " "
empty_symbol = " "

# ---------- Time (right) ----------
[time]
disabled = false
format = "[ $time](bold white)"
time_format = "%H:%M:%S"

# ---------- Prompt char ----------
[character]
success_symbol = "[❯](bold green)"
error_symbol = "[❯](bold red)"
vicmd_symbol = "[❮](bold yellow)"
